<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Rotating Cube</title>
    <style>
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <button onclick="changeShape()">Change to Pyramid</button>
    <button onclick="changeShapeAgain()">Change to Cube</button>

    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script>
      let scene, camera, render, cube;
      const width = window.innerWidth;
      const height = window.innerHeight;
function init(){

 scene = new THREE.Scene();
 camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
camera.position.z = 5;

 renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(width, height);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
document.body.appendChild(renderer.domElement);


const geometry = new THREE.BoxGeometry();
const material = new THREE.MeshPhongMaterial({ color: 0xff0000 });
const pyramidGeometry = new THREE.ConeGeometry(1, 1, 4);
 cube = new THREE.Mesh(geometry, material);


cube.castShadow = true;
cube.receiveShadow = true;
scene.add(cube);


const groundGeometry = new THREE.PlaneGeometry(10, 10, 10, 10);
const groundMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
const ground = new THREE.Mesh(groundGeometry, groundMaterial);
ground.rotation.x = -Math.PI / 2;
ground.position.y = -2;
ground.receiveShadow = true;
scene.add(ground);

const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(0, 5, 5);
light.castShadow = true;
light.shadow.camera.near = 0.1;
light.shadow.camera.far = 25;
scene.add(light);
}


const mouse = new THREE.Vector2();
const windowHalf = new THREE.Vector2(width / 2, height / 2);

function onDocumentMouseMove(event) {
  mouse.x = (event.clientX - windowHalf.x) / 100; 
  mouse.y = (event.clientY - windowHalf.y) / 100;
}

document.addEventListener('mousemove', onDocumentMouseMove, false);


window.addEventListener('wheel', handleScroll);

function handleScroll(event) {
  const delta = event.deltaY;

  if (delta > 0) {
    camera.position.z += 0.1;
  } else {
    camera.position.z -= 0.1;
  }
}

function animate() {
  requestAnimationFrame(animate);

  cube.rotation.x += mouse.y * 0.03;
  cube.rotation.y += mouse.x * 0.03;

   renderer.render(scene, camera);
}
      function changeShape() {
        scene.remove(cube);
        const pyramidGeometry = new THREE.ConeGeometry(1, 1, 4);
        const material = new THREE.MeshPhongMaterial({ color: 0xff0000 });
        cube = new THREE.Mesh(pyramidGeometry, material);
        scene.add(cube);
      }
      function changeShapeAgain() {
        scene.remove(cube);
        const geometry = new THREE.BoxGeometry();
        const material = new THREE.MeshPhongMaterial({ color: 0xff0000 });
        cube = new THREE.Mesh(geometry, material);
        scene.add(cube);
      }
      init();
animate();

    </script>

  </body>
</html>
